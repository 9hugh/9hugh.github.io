{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hugh's 的乌托邦",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/09/05/RedisStudy/",
            "url": "http://example.com/2023/09/05/RedisStudy/",
            "title": "Redis学习总结",
            "date_published": "2023-09-05T10:29:12.000Z",
            "content_html": "<h1 id=\"redis学习总结\"><a class=\"markdownIt-Anchor\" href=\"#redis学习总结\">#</a> Redis 学习总结</h1>\n<h2 id=\"一-概述\"><a class=\"markdownIt-Anchor\" href=\"#一-概述\">#</a> 一、概述</h2>\n<p>Redis（Remote Dictionary Server）是一种高性能的开源<strong>内存数据存储</strong>系统，通常被称为数据结构服务器。它具有快速的读写能力，适用于多种用途，从缓存到会话存储，以及分布式系统中的数据存储。Redis 是一个基于键值对的存储系统，其中每个键都映射到一个值，可以是各种数据类型，如字符串、哈希、列表、集合和有序集合。</p>\n<p>在我们日常的 Java Web 开发中，无不都是使用数据库来进行数据的存储，由于一般的系统任务中通常不会存在高并发的情况，所以这样看起来并没有什么问题，可是一旦涉及大数据量的需求，比如一些商品抢购的情景，或者是主页访问量瞬间较大的时候，单一使用数据库来保存数据的系统会因为面向磁盘，磁盘读 / 写速度比较慢的问题而存在严重的性能弊端，一瞬间成千上万的请求到来，需要系统在极短的时间内完成成千上万次的读 / 写操作，这个时候往往不是数据库能够承受的，极其容易造成数据库系统瘫痪，最终导致服务宕机的严重生产问题。</p>\n<p>注意：因为 Redis 是基于内存进行存储的，因此内存容量的大小会影响 Redis 的性能，因此也可以引申出 RocksDB</p>\n<h3 id=\"1-引入\"><a class=\"markdownIt-Anchor\" href=\"#1-引入\">#</a> 1. 引入</h3>\n<p>为了克服上述的问题，Java Web 项目通常会引入 NoSQL 技术，这是一种<strong>基于内存的数据库</strong>，并且提供一定的持久化功能。</p>\n<p><strong>Redis</strong> 和<strong> MongoDB</strong> 是当前使用最广泛的 NoSQL，而就 Redis 技术而言，它的性能十分优越，可以<strong>支持每秒十几万此的读 / 写操作</strong>，其性能远超数据库，并且还<strong>支持集群、分布式、主从同步等</strong>配置，原则上可以无限扩展，让更多的数据存储在内存中，更让人欣慰的是它还<strong>支持一定的事务能力</strong>，这保证了高并发的场景下数据的安全和一致性。</p>\n<h3 id=\"2-主要特点\"><a class=\"markdownIt-Anchor\" href=\"#2-主要特点\">#</a> 2. 主要特点</h3>\n<ul>\n<li><strong>内存存储</strong>：Redis 主要将数据存储在内存中，这使得它能够提供快速的读写操作。同时，Redis 还支持数据持久化到磁盘，以保证数据的安全性。</li>\n<li><strong>多样的数据结构</strong>：Redis 支持多种数据结构，如字符串、列表、哈希、集合和有序集合。这使得开发人员能够根据应用需求选择最合适的数据类型来存储和操作数据。</li>\n<li><strong>发布订阅</strong>：Redis 支持发布订阅模式，允许客户端订阅特定的频道并接收相应的消息。这对于实现实时消息传递和事件通知非常有用。</li>\n<li><strong>事务支持</strong>：Redis 允许一批命令被打包成一个事务，然后一次性执行。这可以保证一系列操作的原子性，要么全部执行成功，要么全部失败。</li>\n<li><strong>复制和高可用性</strong>：Redis 支持主从复制，可以将数据从一个主服务器复制到多个从服务器，以提高读取性能和数据冗余。【优化方案：主从复制】</li>\n</ul>\n<h3 id=\"3-应用领域\"><a class=\"markdownIt-Anchor\" href=\"#3-应用领域\">#</a> 3. 应用领域</h3>\n<p>Redis 在许多领域都有广泛的应用，包括但不限于：</p>\n<ul>\n<li><strong>缓存</strong>：将常用的数据存储在 Redis 中，以加速数据访问，减轻后端数据库的压力。</li>\n<li><strong>会话存储</strong>：将用户会话数据存储在 Redis 中，实现分布式会话管理，从而提高系统的扩展性和性能。</li>\n<li><strong>计数器</strong>：使用 Redis 的原子性操作来实现计数器功能，如点赞数、阅读数等。</li>\n<li><strong>实时排行榜</strong>：通过有序集合数据结构，可以轻松实现实时排行榜，如热门商品排名、用户积分排名等。【例如：各大网站的 Top10 事物等】</li>\n<li><strong>消息队列</strong>：利用 Redis 的发布订阅机制，实现简单的消息队列系统，用于异步处理任务和事件通知。</li>\n</ul>\n<h3 id=\"4-mysql-redis-rocksdb的区别以及对应应用场景\"><a class=\"markdownIt-Anchor\" href=\"#4-mysql-redis-rocksdb的区别以及对应应用场景\">#</a> 4. Mysql Redis RocksDB 的区别以及对应应用场景</h3>\n<h4 id=\"a-redis\"><a class=\"markdownIt-Anchor\" href=\"#a-redis\">#</a> a. Redis</h4>\n<p><strong>Redis</strong> 是一种内存数据结构存储，可用作数据库、缓存和消息代理。</p>\n<p><strong>应用场景：</strong></p>\n<ul>\n<li>缓存频繁访问的数据以加速应用性能。</li>\n<li>实时排行榜、分析和计数系统。</li>\n<li>为任务处理和后台作业实现队列。</li>\n<li>在 Web 应用中进行会话管理和用户身份验证。</li>\n</ul>\n<h4 id=\"b-mysql\"><a class=\"markdownIt-Anchor\" href=\"#b-mysql\">#</a> b. MySQL</h4>\n<p><strong>MySQL</strong> 是一种流行的开源关系型数据库管理系统。它以以下特点闻名：</p>\n<ul>\n<li><strong>结构化数据：</strong> MySQL 将数据存储在具有预定义模式的表中，非常适合结构化和一致的数据。</li>\n<li><strong>ACID 兼容性：</strong> 它提供了 ACID（原子性、一致性、隔离性、持久性）事务以确保数据完整性。</li>\n<li><strong>SQL 支持：</strong> MySQL 支持使用结构化查询语言（SQL）进行复杂查询。</li>\n<li><strong>数据关系：</strong> 它使用外键处理表之间的关系，适用于具有复杂数据模型的应用。</li>\n</ul>\n<p><strong>应用场景：</strong></p>\n<ul>\n<li>管理和存储具有预定义模式的结构化数据。</li>\n<li>需要进行复杂查询和报告的应用。</li>\n<li>处理交易和订单管理的电子商务平台。</li>\n<li>管理文章、用户数据等内容管理系统（CMS）。</li>\n</ul>\n<h4 id=\"c-rocksdb既可以基于内存也可以基于磁盘\"><a class=\"markdownIt-Anchor\" href=\"#c-rocksdb既可以基于内存也可以基于磁盘\">#</a> c. RocksDB【既可以基于内存也可以基于磁盘】</h4>\n<p><strong>RocksDB</strong> 是一种针对闪存存储和快速写入操作进行优化的嵌入式高性能键值存储。其关键特点包括：</p>\n<ul>\n<li><strong>嵌入式存储：</strong> RocksDB 可以嵌入在应用程序中，提供本地存储解决方案。</li>\n<li><strong>优化写入密集型工作负载：</strong> 它在频繁写入操作和大型数据集的情况下表现出色。</li>\n<li><strong>LSM 树结构：</strong> RocksDB 使用日志结构合并树（LSM-Tree）结构，实现高效的磁盘 I/O。</li>\n<li><strong>数据压缩：</strong> 它会在后台自动压缩数据，优化存储使用。</li>\n</ul>\n<p><strong>应用场景：</strong></p>\n<ul>\n<li>在应用程序或边缘设备中进行本地数据存储。</li>\n<li>适用于具有写入密集型工作负载的应用，如日志记录和时间序列数据。</li>\n<li>高速数据摄取和数据处理流水线。</li>\n<li>需要高效本地存储的移动应用程序。</li>\n</ul>\n<h3 id=\"5-redis的读与写操作的逻辑\"><a class=\"markdownIt-Anchor\" href=\"#5-redis的读与写操作的逻辑\">#</a> 5. Redis 的读与写操作的逻辑</h3>\n<h4 id=\"a-读操作\"><a class=\"markdownIt-Anchor\" href=\"#a-读操作\">#</a> a. 读操作：</h4>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/dkhBaYLt.png\" alt=\"image-20230905191317916\"></p>\n<ol>\n<li>当<strong>第一次读取数据的时候</strong>，读取 Redis 的数据就会失败，此时就会触发程序读取数据库，把数据读取出来，并且写入 Redis 中；</li>\n<li>当<strong>第二次以及以后需要读取数据时</strong>，就会直接读取 Redis，读到数据后就结束了流程，这样速度就大大提高了。</li>\n</ol>\n<p>从上面的分析可以知道，读操作的可能性是远大于写操作的，所以使用 Redis 来处理日常中需要经常读取的数据，速度提升是显而易见的，同时也降低了对数据库的依赖，使得数据库的压力大大减少。</p>\n<h4 id=\"b-写操作\"><a class=\"markdownIt-Anchor\" href=\"#b-写操作\">#</a> b. 写操作：</h4>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/hynCM7yF.png\" alt=\"image-20230906101010560\"></p>\n<p>从流程可以看出，更新或者写入的操作，需要多个 Redis 的操作，如果业务数据写次数远大于读次数那么就没有必要使用 Redis。</p>\n<h4 id=\"c-高速读写操作\"><a class=\"markdownIt-Anchor\" href=\"#c-高速读写操作\">#</a> c. 高速读写操作：</h4>\n<p>在如今的互联网中，越来越多的存在高并发的情况，比如天猫双 11、抢红包、抢演唱会门票等，这些场合都是在某一个瞬间或者是某一个短暂的时刻有<strong>成千上万的请求</strong>到达服务器，如果单纯的使用数据库来进行处理，就算不崩，也会很慢的，<strong>轻则造成用户体验极差用户量流失</strong>，<strong>重则数据库瘫痪，服务宕机</strong>，而这样的场合都是不允许的！</p>\n<p>所以我们需要使用 Redis 来应对这样的高并发需求的场合，我们先来看看<strong>一次请求操作的流程</strong>：</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/750ueAbb.png\" alt=\"image-20230906102004525\"></p>\n<h2 id=\"二-快速入门\"><a class=\"markdownIt-Anchor\" href=\"#二-快速入门\">#</a> 二、快速入门</h2>\n<h3 id=\"1-安装redis\"><a class=\"markdownIt-Anchor\" href=\"#1-安装redis\">#</a> 1. 安装 Redis</h3>\n<h4 id=\"a-官方文档\"><a class=\"markdownIt-Anchor\" href=\"#a-官方文档\">#</a> a. 官方文档：</h4>\n<h5 id=\"get-started-with-redis\"><a class=\"markdownIt-Anchor\" href=\"#get-started-with-redis\">#</a> Get started with Redis</h5>\n<p>How to get up and running with Redis</p>\n<p>This is a guide to getting started with Redis. You’ll learn how to install, run, and experiment with the Redis server process.</p>\n<h5 id=\"install-redis\"><a class=\"markdownIt-Anchor\" href=\"#install-redis\">#</a> Install Redis</h5>\n<p>How you install Redis depends on your operating system and whether you’d like to install it bundled with Redis Stack and Redis UI. See the guide below that best fits your needs:</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1mcm9tLXNvdXJjZQ==\">Install Redis from Source</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi1saW51eA==\">Install Redis on Linux</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi1tYWMtb3M=\">Install Redis on macOS</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi13aW5kb3dz\">Install Redis on Windows</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsLXN0YWNrLw==\">Install Redis with Redis Stack and RedisInsight</span></li>\n</ul>\n<p>Once you have Redis up and running, and can connect using  <code>redis-cli</code> , you can continue with the steps below.</p>\n<h4 id=\"b-中文翻译\"><a class=\"markdownIt-Anchor\" href=\"#b-中文翻译\">#</a> b. 中文翻译：</h4>\n<h5 id=\"开始使用-redis\"><a class=\"markdownIt-Anchor\" href=\"#开始使用-redis\">#</a> 开始使用 Redis</h5>\n<p>如何启动并运行 Redis</p>\n<p>这是开始使用 Redis 的指南。您将学习如何安装、运行和试验 Redis 服务器进程。</p>\n<h5 id=\"安装redis\"><a class=\"markdownIt-Anchor\" href=\"#安装redis\">#</a> 安装 Redis</h5>\n<p>安装 Redis 的方式取决于您的操作系统，以及您是否要将其与 Redis Stack 和 Redis UI 捆绑在一起安装。请参阅下面最适合您需求的指南：</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1mcm9tLXNvdXJjZQ==\">从源安装 Redis</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi1saW51eA==\">在 Linux 上安装 Redis</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi1tYWMtb3M=\">在 macOS 上安装 Redis</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsYXRpb24vaW5zdGFsbC1yZWRpcy1vbi13aW5kb3dz\">在 Windows 上安装 Redis</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb2NzL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsLXN0YWNrLw==\">使用 Redis Stack 和 RedisInsight 安装 Redis</span></li>\n</ul>\n<p>根据文档安装相应操作系统的 Redis，启动并运行 Redis 并可以使用 进行连接后，您可以继续执行以下步骤。 <code>redis-cli</code></p>\n<p><strong>注意</strong>：如果需要跨服务器连接，需要将 conf 文件中的 protected—mode 改为 No 即可</p>\n<h3 id=\"2-java程序如何使用redis进行操作\"><a class=\"markdownIt-Anchor\" href=\"#2-java程序如何使用redis进行操作\">#</a> 2. Java 程序如何使用 Redis 进行操作</h3>\n<h4 id=\"a-导入相关依赖这里使用springboot提供的\"><a class=\"markdownIt-Anchor\" href=\"#a-导入相关依赖这里使用springboot提供的\">#</a> a. 导入相关依赖【这里使用 Springboot 提供的】</h4>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--redis 依赖 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-data-redis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"b-配置redis的端口以及ip\"><a class=\"markdownIt-Anchor\" href=\"#b-配置redis的端口以及ip\">#</a> b. 配置 redis 的端口以及 ip</h4>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>spring.data.redis.port=6379</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>spring.data.redis.host=127.0.0.1</pre></td></tr></table></figure><h4 id=\"c-配置相关配置文件\"><a class=\"markdownIt-Anchor\" href=\"#c-配置相关配置文件\">#</a> c. 配置相关配置文件</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>hugh<span class=\"token punctuation\">.</span>eom<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JsonAutoDetect</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PropertyAccessor</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>databind<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ObjectMapper</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>databind<span class=\"token punctuation\">.</span>jsontype<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LaissezFaireSubTypeValidator</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisConnectionFactory</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisTemplate</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringRedisSerializer</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"15\"></td><td><pre> * @author Hugh。</pre></td></tr><tr><td data-num=\"16\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token annotation punctuation\">@Configuration</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisTemplateConfig</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> redisConnectionFactory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> redisTemplate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>redisConnectionFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">// 使⽤ Jackson2JsonRedisSerialize 替换默认序列化</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">//        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token class-name\">ObjectMapper</span> objectMapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        objectMapper<span class=\"token punctuation\">.</span><span class=\"token function\">setVisibility</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyAccessor</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ALL</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">JsonAutoDetect<span class=\"token punctuation\">.</span>Visibility</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ANY</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        objectMapper<span class=\"token punctuation\">.</span><span class=\"token function\">activateDefaultTyping</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LaissezFaireSubTypeValidator</span><span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">,</span><span class=\"token class-name\">ObjectMapper<span class=\"token punctuation\">.</span>DefaultTyping</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NON_FINAL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericJackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span>objectMapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token comment\">// 设置 key 和 value 的序列化规则</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span>jackson2JsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token comment\">// 设置 hashKey 和 hashValue 的序列化规则</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashKeySerializer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">setHashValueSerializer</span><span class=\"token punctuation\">(</span>jackson2JsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token comment\">// 设置⽀持事物</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token comment\">//redisTemplate.setEnableTransactionSupport(true);</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">afterPropertiesSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token keyword\">return</span> redisTemplate<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"d-测试redis\"><a class=\"markdownIt-Anchor\" href=\"#d-测试redis\">#</a> d. 测试 Redis</h4>\n<pre><code>public boolean verifyCaptcha(@RequestParam(&quot;captcha&quot;) String captcha) throws InterruptedException &#123;\n    Thread.sleep(1000);\n    String captchaStore = (String) redisTemplate.opsForValue().get(&quot;captcha&quot;);\n    System.out.println(&quot;验证接收到的验证码字符串：&quot; + captcha);\n    System.out.println(&quot;Redis数据库中的验证码字符串：&quot; + captchaStore);\n    // 验证用户输入的验证码是否与之前生成的验证码匹配\n    if (captcha != null &amp;&amp; captcha.equals(captchaStore)) &#123;\n        // 验证码验证成功\n        return true;\n    &#125; else &#123;\n        // 验证码验证失败\n        return false;\n    &#125;\n</code></pre>\n<p>** 注意：** 这里使用 redisTemplate.opsForValue ().get () 方法获取字符串类型的数据，类似的还有其他支持的数据类型【hash , list , set , stream , zset】等等</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/04/%E5%B7%A5%E4%BD%9C%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/",
            "url": "http://example.com/2023/09/04/%E5%B7%A5%E4%BD%9C%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/",
            "title": "工作项目文档",
            "date_published": "2023-09-04T06:29:36.000Z",
            "content_html": "<h1 id=\"离职对接项目文档\"><a class=\"markdownIt-Anchor\" href=\"#离职对接项目文档\">#</a> 离职对接项目文档</h1>\n<h2 id=\"七月主要项目\"><a class=\"markdownIt-Anchor\" href=\"#七月主要项目\">#</a> 七月主要项目：</h2>\n<h3 id=\"一-对hada-pool客户端solo模式以及管理端下的业务进行分析\"><a class=\"markdownIt-Anchor\" href=\"#一-对hada-pool客户端solo模式以及管理端下的业务进行分析\">#</a> 一、对 HADA POOL 客户端 SOLO 模式以及管理端下的业务进行分析</h3>\n<h4 id=\"1solo模式-子账户列表k\"><a class=\"markdownIt-Anchor\" href=\"#1solo模式-子账户列表k\">#</a> 1.SOLO 模式 - 子账户列表 k</h4>\n<p>a.SOLO 账户对应币种的钱包地址以及 icon</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/NyVDjKya.png\" alt=\"image-20230905103158047\"></p>\n<p>b. 设备状态、收益以及算力统计部分</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/Qg0uqoQI.png\" alt=\"image-20230905103158048\"></p>\n<p>c.Reward (奖励) 有关趋势图以及日志数据</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/bCmDfXtE.png\" alt=\"image-20230905103322268\"></p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/eDT7Xjqi.png\" alt=\"image-20230905103355533\"></p>\n<h4 id=\"2solo模式-设备明细\"><a class=\"markdownIt-Anchor\" href=\"#2solo模式-设备明细\">#</a> 2.SOLO 模式 - 设备明细</h4>\n<p>a. 设备的在线状态以及对应算力信息和显卡信息</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/GvU7gCK8.png\" alt=\"image-20230905103504137\"></p>\n<p>b. 设备在线统计表</p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/hReApjZ3.png\" alt=\"image-20230905103549951\"></p>\n<h4 id=\"二-使用go语言实现调用api获取指定货币的ratio服务费率220版本从system_config表中获取230版本改为从currency_info_expand表中获取\"><a class=\"markdownIt-Anchor\" href=\"#二-使用go语言实现调用api获取指定货币的ratio服务费率220版本从system_config表中获取230版本改为从currency_info_expand表中获取\">#</a> 二、使用 Go 语言实现调用 api 获取指定货币的 Ratio 服务费率【2.2.0 版本从 system_config 表中获取，2.3.0 版本改为从 currency_info_expand 表中获取】</h4>\n<figure class=\"highlight markdown\"><figcaption data-lang=\"markdown\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>func getRatio(keyType, sysKey string) float64 &#123;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    BaseUrl := \"http://localhost:8080/pc/v1/sys/config\"</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    client := http.Client&#123;&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    req, err := http.NewRequest(\"GET\", BaseUrl, nil)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    if err != nil &#123;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       fmt.Println(\"get failed, err:\", err)</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       return 1</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    &#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    query := req.URL.Query()</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    query.Add(\"keyType\", keyType)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    query.Add(\"sysKey\", sysKey)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    req.URL.RawQuery = query.Encode()</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>​    resp, err := client.Do(req)</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>​    // 检查响应状态码</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>​    if resp.StatusCode != http.<span class=\"token italic\"><span class=\"token punctuation\">*</span><span class=\"token content\">StatusOK</span><span class=\"token punctuation\">*</span></span> &#123;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>​       fmt.Println(\"请求返回状态码错误:\", resp.StatusCode)</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>​       return 1</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>​    &#125; else &#123;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>​       defer resp.Body.Close()</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>​       body, err := io.ReadAll(resp.Body) // 读取返回出的内容,返回的是byte</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>​       if err != nil &#123;</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>​          fmt.Println(\"读取响应值失败！\", err)</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>​          return 1</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>​       &#125;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>​       fmt.Println(string(body))</pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>​       // 解析JSON响应体</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>​       var responseData ResponseData</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>​       err = json.Unmarshal(body, &amp;responseData)</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>​       if err != nil &#123;</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>​          fmt.Println(\"JSON解析失败:\", err)</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>​          return 1</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>​       &#125;</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>​       // 提取特定的值</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>​       dataValue := responseData.Data</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>​       fmt.Println(\"提取的data值:\", dataValue)</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>​       Fee, err := strconv.ParseFloat(dataValue, 64)</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>​       return Fee</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>​    &#125;</pre></td></tr></table></figure><h2 id=\"八月主要项目\"><a class=\"markdownIt-Anchor\" href=\"#八月主要项目\">#</a> 八月主要项目：</h2>\n<h3 id=\"image-20230905101447200\"><a class=\"markdownIt-Anchor\" href=\"#image-20230905101447200\">#</a> <img data-src=\"https://img1.imgtp.com/2023/09/06/10DOkgxF.png\" alt=\"image-20230905101447200\"></h3>\n<h3 id=\"一-收益首页列表功能包括币种收益总览以及子账户收益总览\"><a class=\"markdownIt-Anchor\" href=\"#一-收益首页列表功能包括币种收益总览以及子账户收益总览\">#</a> 一、收益首页列表功能【包括币种收益总览以及子账户收益总览】</h3>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/8tBYd2U8.png\" alt=\"image-20230905104652550\"></p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/4NLdBQlP.png\" alt=\"image-20230905104725662\"></p>\n<h4 id=\"1币种收益总览币种排序\"><a class=\"markdownIt-Anchor\" href=\"#1币种收益总览币种排序\">#</a> 1. 币种收益总览 + 币种排序</h4>\n<p>a. 使用多线程异步获取各个币种的收益总览信息</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 获取登录用户的 id</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">long</span> loginCustomerId <span class=\"token operator\">=</span> <span class=\"token class-name\">LoginHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLoginCustomerId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 获取用户币种的排序方式</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencySortVo</span><span class=\"token punctuation\">></span></span> listOfSort <span class=\"token operator\">=</span> customerCurrencySortService<span class=\"token punctuation\">.</span><span class=\"token function\">showSortCurrency</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 创建一个 List 用来保存三种不同币种的收益</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeUserOverviewResponseVo</span><span class=\"token punctuation\">></span></span> userIncomeList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 获取所有币种收益的 Future</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CompletableFuture</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeUserOverviewResponseVo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> futures <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencySortVo</span> currencySort <span class=\"token operator\">:</span> listOfSort<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">CompletableFuture</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeUserOverviewResponseVo</span><span class=\"token punctuation\">></span></span> currencyFuture <span class=\"token operator\">=</span> <span class=\"token class-name\">CompletableFuture</span><span class=\"token punctuation\">.</span><span class=\"token function\">supplyAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">CurrencyEnum</span> currency <span class=\"token operator\">=</span> <span class=\"token class-name\">CurrencyEnum</span><span class=\"token punctuation\">.</span><span class=\"token function\">getByCode</span><span class=\"token punctuation\">(</span>currencySort<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> poolShareSettlementDayQueryService<span class=\"token punctuation\">.</span><span class=\"token function\">queryUserIncomeByCurrency</span><span class=\"token punctuation\">(</span>loginCustomerId<span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    futures<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>currencyFuture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 用于保存各币种收益的 Map 集合</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IncomeUserOverviewResponseVo</span><span class=\"token punctuation\">></span></span> incomeMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token class-name\">CompletableFuture</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> allFutures <span class=\"token operator\">=</span> <span class=\"token class-name\">CompletableFuture</span><span class=\"token punctuation\">.</span><span class=\"token function\">allOf</span><span class=\"token punctuation\">(</span>futures<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CompletableFuture</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>allFutures<span class=\"token punctuation\">.</span><span class=\"token function\">thenRun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CompletableFuture</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeUserOverviewResponseVo</span><span class=\"token punctuation\">></span></span> future <span class=\"token operator\">:</span> futures<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token class-name\">IncomeUserOverviewResponseVo</span> currencyIncome <span class=\"token operator\">=</span> future<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        incomeMap<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>currencyIncome<span class=\"token punctuation\">.</span><span class=\"token function\">getChainTypeName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> currencyIncome<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>allFutures<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>b. 根据获取的子账户排序规则对获取的收益进行排序处理【这里并加入了零值隐藏的过滤条件】</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 将三种币种的收益汇总</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>listOfSort<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// 如果用户没有排序规则，则按默认排序</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 逐一获取</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IncomeUserOverviewResponseVo</span> income <span class=\"token operator\">:</span> incomeMap<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">BigDecimal</span> totalIncomes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span>income<span class=\"token punctuation\">.</span><span class=\"token function\">getTotalIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">BigDecimal</span> forecastIncomes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span>income<span class=\"token punctuation\">.</span><span class=\"token function\">getForecastIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 判断是否需要隐藏无收益的币种</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>totalIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ZERO</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> forecastIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ZERO</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> isHiddenZero<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        userIncomeList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>income<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// 按顺序取值放入结果集中</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencySortVo</span> sortType <span class=\"token operator\">:</span> listOfSort<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">String</span> chainType <span class=\"token operator\">=</span> <span class=\"token class-name\">CurrencyEnum</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChainTypeNameByCode</span><span class=\"token punctuation\">(</span>sortType<span class=\"token punctuation\">.</span><span class=\"token function\">getType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">IncomeUserOverviewResponseVo</span> currencyIncome <span class=\"token operator\">=</span> incomeMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>chainType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">BigDecimal</span> totalIncomes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span>currencyIncome<span class=\"token punctuation\">.</span><span class=\"token function\">getTotalIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token class-name\">BigDecimal</span> forecastIncomes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span>currencyIncome<span class=\"token punctuation\">.</span><span class=\"token function\">getForecastIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">// 判断是否需要隐藏无收益的币种</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>totalIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ZERO</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> forecastIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ZERO</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> isHiddenZero<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        userIncomeList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>currencyIncome<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"2子账户收益总览子账户排序\"><a class=\"markdownIt-Anchor\" href=\"#2子账户收益总览子账户排序\">#</a> 2. 子账户收益总览 + 子账户排序</h4>\n<p>a. 根据传入的币种查询该币种下各个子账户的收益情况【具体业务层获取逻辑自行查看】</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">subAccountOverview</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chainType\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> chainType<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"isHiddenZero\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">boolean</span> isHiddenZero<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">CurrencyEnum</span> currency <span class=\"token operator\">=</span> <span class=\"token class-name\">CurrencyEnum</span><span class=\"token punctuation\">.</span><span class=\"token function\">getByName</span><span class=\"token punctuation\">(</span>chainType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 创建一个 List 用于保存排序好的子账户收益</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token punctuation\">></span></span> subOverview <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 获取子账户的排序规则【注意这里查到的是所有子账户的一个排序】</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BusinessSubAccountSortVo</span><span class=\"token punctuation\">></span></span> sortInfo <span class=\"token operator\">=</span> customerBusinessSubAccountSortService<span class=\"token punctuation\">.</span><span class=\"token function\">showCustomerSubAccountSortInfo</span><span class=\"token punctuation\">(</span>currency<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 获取子账户信息</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> listWebResult <span class=\"token operator\">=</span> poolShareSettlementDayQueryService<span class=\"token punctuation\">.</span><span class=\"token function\">querySubAccountIncomeByCurrency</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LoginHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLoginCustomerId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token punctuation\">></span></span> data <span class=\"token operator\">=</span> listWebResult<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>b. 对查询到的子账户列表加上排序规则以及零值过滤</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 将子账户收益信息放入 Map 集合中以 子账户 id 为键，IncomeSubOverviewResponseVo 为 Value</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token punctuation\">></span></span> dataMap <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IncomeSubOverviewResponseVo</span><span class=\"token operator\">::</span><span class=\"token function\">getSubCustomerId</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span><span class=\"token function\">identity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 去除判断</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">BusinessSubAccountSortVo</span> sortType <span class=\"token operator\">:</span> sortInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">IncomeSubOverviewResponseVo</span> incomeSubOverviewResponseVo <span class=\"token operator\">=</span> dataMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>sortType<span class=\"token punctuation\">.</span><span class=\"token function\">getSubAccountId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 获取累计收益和今日预估收益</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">String</span> totalIncomes <span class=\"token operator\">=</span> incomeSubOverviewResponseVo<span class=\"token punctuation\">.</span><span class=\"token function\">getTotalIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">String</span> forecastIncomes <span class=\"token operator\">=</span> incomeSubOverviewResponseVo<span class=\"token punctuation\">.</span><span class=\"token function\">getForecastIncomes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>totalIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> forecastIncomes<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> isHiddenZero<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    subOverview<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>incomeSubOverviewResponseVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span>subOverview<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"二-币种设置管理端\"><a class=\"markdownIt-Anchor\" href=\"#二-币种设置管理端\">#</a> 二、币种设置【管理端】</h3>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/pVLbyLAJ.png\" alt=\"image-20230905110406679\"></p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/KqPArAbI.png\" alt=\"image-20230905110423778\"></p>\n<h4 id=\"1币种扩展信息显示支持更新时间的过滤\"><a class=\"markdownIt-Anchor\" href=\"#1币种扩展信息显示支持更新时间的过滤\">#</a> 1. 币种扩展信息显示【支持更新时间的过滤】</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"获取币种扩展列表信息\"</span><span class=\"token punctuation\">,</span> notes <span class=\"token operator\">=</span> <span class=\"token string\">\"2.3.0 已完成\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/currencyExpand/list\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageVo</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencyInfoExpandVo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">pageCurrencyInfoExpand</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">CurrencyInfoExpandRequestVo</span> requestVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> currencyInfoExpandService<span class=\"token punctuation\">.</span><span class=\"token function\">pageInfo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LoginHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLoginAdminId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">PageVo</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencyInfoExpandVo</span><span class=\"token punctuation\">></span></span> pageVos <span class=\"token operator\">=</span> dozerUtil<span class=\"token punctuation\">.</span><span class=\"token function\">pageVoList</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CurrencyInfoExpandVo</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            target<span class=\"token punctuation\">.</span><span class=\"token function\">setChainTypeName</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyEnum</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChainTypeNameByCode</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            target<span class=\"token punctuation\">.</span><span class=\"token function\">setCurrencyType</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            target<span class=\"token punctuation\">.</span><span class=\"token function\">setChainUnit</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyEnum</span><span class=\"token punctuation\">.</span><span class=\"token function\">getChainUnitByCode</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            target<span class=\"token punctuation\">.</span><span class=\"token function\">setUpdatedAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">getUpdatedAt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token class-name\">BeanUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">copyProperties</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span>pageVos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"登录异常\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这里使用 DozerUtil.pageVoList ( ) 方法将 page 对象转化成 pageVo 对象</p>\n<h4 id=\"2币种费率信息的修改需要同步数据库以及本地缓存\"><a class=\"markdownIt-Anchor\" href=\"#2币种费率信息的修改需要同步数据库以及本地缓存\">#</a> 2. 币种费率信息的修改【需要同步数据库以及本地缓存】</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Date</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 确认币种是否存在</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Integer</span> currencyType <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>updateRequestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currencyType <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"不存在的币种类型\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 获取需要修改的币种 type</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 获取原有数据的数据</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token punctuation\">></span></span> wrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"currency_type\"</span><span class=\"token punctuation\">,</span> currencyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token class-name\">CurrencyInfoExpandEntity</span> currencyInfoExpandEntity <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token class-name\">String</span> oldSettlementFee <span class=\"token operator\">=</span> currencyInfoExpandEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getSettlementFee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token class-name\">BigDecimal</span> oldRate <span class=\"token operator\">=</span> currencyInfoExpandEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getRate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token class-name\">String</span> oldServiceFeeWithdraw <span class=\"token operator\">=</span> currencyInfoExpandEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getServiceFeeWithdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// 获取需要修改的数据</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token class-name\">String</span> settlementFee <span class=\"token operator\">=</span> updateRequestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getSettlementFee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token class-name\">BigDecimal</span> rate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span>updateRequestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getRate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token class-name\">String</span> serviceFeeWithdraw <span class=\"token operator\">=</span> updateRequestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getServiceFeeWithdraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">// 只要有一个修改则触发修改操作</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>oldSettlementFee <span class=\"token operator\">!=</span> settlementFee <span class=\"token operator\">||</span> oldRate <span class=\"token operator\">!=</span> rate <span class=\"token operator\">||</span> oldServiceFeeWithdraw <span class=\"token operator\">!=</span> serviceFeeWithdraw<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">// 修改数据库中对应信息</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token class-name\">UpdateWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token punctuation\">></span></span> updateWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UpdateWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    updateWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">lambda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getSettlementFee</span><span class=\"token punctuation\">,</span> settlementFee<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getRate</span><span class=\"token punctuation\">,</span> rate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getServiceFeeWithdraw</span><span class=\"token punctuation\">,</span> serviceFeeWithdraw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getUpdatedAt</span><span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrencyInfoExpandEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getCurrencyType</span><span class=\"token punctuation\">,</span> currencyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> updateWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token comment\">// 同步更新本地缓存信息</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token class-name\">CurrencyInfoEntity</span> currencyInfo <span class=\"token operator\">=</span> localCache<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyTypeMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>currencyType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token class-name\">CurrencyInfoExpandEntity</span> currencyExpand <span class=\"token operator\">=</span> currencyInfo<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrencyInfoExpandEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    currencyExpand<span class=\"token punctuation\">.</span><span class=\"token function\">setSettlementFee</span><span class=\"token punctuation\">(</span>settlementFee<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    currencyExpand<span class=\"token punctuation\">.</span><span class=\"token function\">setRate</span><span class=\"token punctuation\">(</span>rate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    currencyExpand<span class=\"token punctuation\">.</span><span class=\"token function\">setServiceFeeWithdraw</span><span class=\"token punctuation\">(</span>serviceFeeWithdraw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"3币种费率信息的迁移从system_config表中迁移至currency_info_expand表中\"><a class=\"markdownIt-Anchor\" href=\"#3币种费率信息的迁移从system_config表中迁移至currency_info_expand表中\">#</a> 3. 币种费率信息的迁移【从 system_config 表中迁移至 currency_info_expand 表中】</h4>\n<p><strong>注意：有关费率信息的方法都修改为从 currency_info_expand 表中获取</strong></p>\n<h3 id=\"三-显卡配置管理端\"><a class=\"markdownIt-Anchor\" href=\"#三-显卡配置管理端\">#</a> 三、显卡配置【管理端】</h3>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/TNw4G3Tk.png\" alt=\"image-20230905135330997\"></p>\n<p><img data-src=\"https://img1.imgtp.com/2023/09/06/ozavukXR.png\" alt=\"image-20230905135406280\"></p>\n<h4 id=\"1显卡基本显卡信息列表显示加入读取型号显示型号模板类型的过滤条件进行查询\"><a class=\"markdownIt-Anchor\" href=\"#1显卡基本显卡信息列表显示加入读取型号显示型号模板类型的过滤条件进行查询\">#</a> 1. 显卡基本显卡信息列表显示【加入读取型号，显示型号，模板类型的过滤条件进行查询】</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"显卡配置-显卡信息显示\"</span><span class=\"token punctuation\">,</span> notes <span class=\"token operator\">=</span> <span class=\"token string\">\"2.3.0 已完成\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/gpuConfig/list\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageVo</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigVo</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">pageGpuBasicConfig</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">MachineGpuBasicConfigRequestVo</span> requestVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token class-name\">LoginHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLoginAdminId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> machineGpuBasicConfigService<span class=\"token punctuation\">.</span><span class=\"token function\">pageInfo</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">PageVo</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigVo</span><span class=\"token punctuation\">></span></span> pageVos <span class=\"token operator\">=</span> dozerUtil<span class=\"token punctuation\">.</span><span class=\"token function\">pageVoList</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MachineGpuBasicConfigVo</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            target<span class=\"token punctuation\">.</span><span class=\"token function\">setOverclockingFlag</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"已配置\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">getOverclockingFlag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                target<span class=\"token punctuation\">.</span><span class=\"token function\">setOverclockingFlag</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"暂无\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token class-name\">BeanUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">copyProperties</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span>pageVos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"登录异常\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">pageInfo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigRequestVo</span> requestVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> page <span class=\"token operator\">=</span> <span class=\"token class-name\">PageHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPageSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> wrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">lambda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasText</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuType</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">like</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuReadModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuReadModel</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuReadModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token punctuation\">.</span><span class=\"token function\">like</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">selectPage</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"2编辑显卡gpu超频模板只要修改一个数据就执行更新操作\"><a class=\"markdownIt-Anchor\" href=\"#2编辑显卡gpu超频模板只要修改一个数据就执行更新操作\">#</a> 2. 编辑显卡 gpu 超频模板【只要修改一个数据就执行更新操作】</h4>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"显卡配置-编辑超频模板\"</span><span class=\"token punctuation\">,</span> notes <span class=\"token operator\">=</span> <span class=\"token string\">\"2.3.0 已完成\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/gpuConfig/editTemplates\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NoneResponseVO</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">editOverClockingTemplates</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">GpuBasicConfigUpdateRequestVo</span> requestVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> machineGpuBasicConfigService<span class=\"token punctuation\">.</span><span class=\"token function\">editOverClockingTemplates</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LoginHelper</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLoginAdminId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>requestVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">TooManyResultsException</span> manyResultsException<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"创建失败,唯一性约束异常\"</span><span class=\"token punctuation\">,</span> manyResultsException<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"创建失败\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"创建失败\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">WebResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NoneResponseVO</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">editOverClockingTemplates</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> loginAdminId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">GpuBasicConfigUpdateRequestVo</span> requestVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Date</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 获取数据库原数据</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> queryWrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    queryWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">lambda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">MachineGpuBasicConfigEntity</span> gpuBasicConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span>queryWrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 如果已经存在超频模板，则查看是否更新数据</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token class-name\">UpdateWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> wrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UpdateWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getOverclockingFlag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// 获取老数据</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">String</span> gpuClock <span class=\"token operator\">=</span> gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">String</span> memoryClock <span class=\"token operator\">=</span> gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">String</span> fanSpeed <span class=\"token operator\">=</span> gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">String</span> powerConsumption <span class=\"token operator\">=</span> gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// 只要修改了一个就更新</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gpuClock<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token operator\">!</span>memoryClock<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token operator\">!</span>fanSpeed<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token operator\">!</span>powerConsumption<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">lambda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getTemplateName</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getTemplateName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getOverclockingFlag</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>  <span class=\"token comment\">// 编辑完成后转为已配置状态</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                    <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getUpdatedAt</span><span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                    <span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">lambda</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getTemplateName</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getTemplateName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getMemoryClock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getFanSpeed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPowerConsumption</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getOverclockingFlag</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>  <span class=\"token comment\">// 编辑完成后转为已配置状态</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getUpdatedAt</span><span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token operator\">::</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">,</span> requestVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGpuShowModel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token class-name\">WebResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">success</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"3同步hadaos上读取的新显卡信息数据库中machine_basic_gpu_info表添加显示型号的唯一键约束\"><a class=\"markdownIt-Anchor\" href=\"#3同步hadaos上读取的新显卡信息数据库中machine_basic_gpu_info表添加显示型号的唯一键约束\">#</a> 3. 同步 HadaOS 上读取的新显卡信息【数据库中 machine_basic_gpu_info 表添加显示型号的唯一键约束】</h4>\n<p>在插入已有显卡时，执行但是并不报错也不插入【使用 insert ignore 语句】</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token keyword\">insert</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"saveNewGpuConfig\"</span> parameterType<span class=\"token operator\">=</span><span class=\"token string\">\"com.hada.pool.server.entity.MachineGpuBasicConfigEntity\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">INSERT</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">IGNORE</span> <span class=\"token keyword\">INTO</span> machine_gpu_basic_config <span class=\"token punctuation\">(</span>gpu_type<span class=\"token punctuation\">,</span> gpu_read_model<span class=\"token punctuation\">,</span> gpu_show_model<span class=\"token punctuation\">,</span> created_at <span class=\"token punctuation\">,</span> updated_at<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">VALUES</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token operator\">&lt;</span>foreach collection<span class=\"token operator\">=</span><span class=\"token string\">\"machineGpuBasicConfigs\"</span> item<span class=\"token operator\">=</span><span class=\"token string\">\"machineGpuBasicConfig\"</span> separator<span class=\"token operator\">=</span><span class=\"token string\">\",\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token comment\">#&#123;machineGpuBasicConfig.gpuType&#125;,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">#&#123;machineGpuBasicConfig.gpuReadModel&#125;,#&#123;machineGpuBasicConfig.gpuShowModel&#125;,#&#123;machineGpuBasicConfig.createdAt&#125;,#&#123;machineGpuBasicConfig.updatedAt&#125;)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>foreach<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token keyword\">insert</span><span class=\"token operator\">></span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">saveNewGpuConfig</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> gpuReadModels<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Date</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">></span></span> saveData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> gpuReadModel <span class=\"token operator\">:</span> gpuReadModels<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token class-name\">MachineGpuBasicConfigEntity</span> gpuBasicConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MachineGpuBasicConfigEntity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">// 设置基础信息</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setGpuReadModel</span><span class=\"token punctuation\">(</span>gpuReadModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setCreatedAt</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setUpdatedAt</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// 根据规则设置 显卡的显示型号</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gpuReadModel<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NVIDIA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setGpuType</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NVIDIA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            gpuReadModel <span class=\"token operator\">=</span> gpuReadModel<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NVIDIA \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gpuReadModel<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GeForce\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                gpuReadModel <span class=\"token operator\">=</span> gpuReadModel<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GeForce \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        gpuBasicConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setGpuShowModel</span><span class=\"token punctuation\">(</span>gpuReadModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        saveData<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>gpuBasicConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">saveNewGpuConfig</span><span class=\"token punctuation\">(</span>saveData<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"九月主要项目\"><a class=\"markdownIt-Anchor\" href=\"#九月主要项目\">#</a> 九月主要项目：</h2>\n<ul>\n<li><code>├── src</code></li>\n<li><code>│   ├── main</code></li>\n<li><code>│   │   ├── java</code></li>\n<li><code>│   │   │   └── pool</code></li>\n<li><code>│   │   │       └── server</code></li>\n<li><code>│   │   │           ├── entity</code></li>\n<li><code>│   │   │           │   ├── base #实体类基类（公共属性）</code></li>\n<li><code>│   │   │           │   │   └── PoolRewardEntityjava</code></li>\n<li><code>│   │   │           │   └── PoolIronRewardEntity.java #具体币种实体类（对应真实表名，无属性）</code></li>\n<li><code>│   │   │           ├── mapper</code></li>\n<li><code>│   │   │           │   ├── base #myabtisplus公共mapper；自定义方法中需要包含tableKey</code></li>\n<li><code>│   │   │           │   │   └── PoolRewardMapper.java</code></li>\n<li><code>│   │   │           │   ├── PoolIronRewardMapper.java#真实mapper；无方法，需继承公共mapper</code></li>\n<li><code>│   │   │           │   ├── factory</code></li>\n<li><code>│   │   │           │   │   └── CurrencyMapperFactory.java#币种mapper工厂类，封装不同mapper的调用逻辑</code></li>\n<li><code>│   │   │           ├── service</code></li>\n<li><code>│   │   │           │   ├── base # myabtisplus层公共实现类；</code></li>\n<li><code>│   │   │           │   │   └──  PoolRewardService.java</code></li>\n<li><code>│   │   │           │   │   └── impl</code></li>\n<li><code>│   │   │           │   ├── aleo  #myabtisplus具体币种的实现类；无方法，继承公共方法；</code></li>\n<li><code>│   │   │           │   ├── factory #myabtisplus币种service工厂类，封装不同service的调用逻辑</code></li>\n<li><code>│   │   │           │   ├── business  #业务方法接口及实现类，用于封装公共业务方法；</code></li>\n<li><code>│   │   │           │   │   └── impl</code></li>\n<li><code>│   │   │           │   └── proxy  # 对于复杂的业务做代理层；用于组装业务方法接口；返回前端</code></li>\n</ul>\n<h3 id=\"一-有关币种相关业务抽离重构\"><a class=\"markdownIt-Anchor\" href=\"#一-有关币种相关业务抽离重构\">#</a> 一、有关币种相关业务抽离重构</h3>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/25/hello-world/",
            "url": "http://example.com/2023/08/25/hello-world/",
            "title": "Hello World",
            "date_published": "2023-08-25T08:20:32.941Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is your very first post. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info. If you get any problems when using Hexo, you can find the answer in <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=\">troubleshooting</span> or you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==\">GitHub</span>.</p>\n<h2 id=\"quick-start\"><a class=\"markdownIt-Anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"markdownIt-Anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"markdownIt-Anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"markdownIt-Anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": []
        }
    ]
}